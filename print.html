<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Crate CI</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Simplifying Crate Management">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <base href="">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

    </head>
    <body class="light">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme;
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            document.querySelector('html').classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="affix"><a href="index.html">Introduction</a></li><li><a href="pr.html"><strong aria-hidden="true">1.</strong> Managing PRs</a></li><li><ol class="section"><li><a href="pr/testing.html"><strong aria-hidden="true">1.1.</strong> Testing</a></li><li><a href="pr/rustfmt.html"><strong aria-hidden="true">1.2.</strong> Style Enforcement</a></li><li><a href="pr/clippy.html"><strong aria-hidden="true">1.3.</strong> Code Smells</a></li><li><a href="pr/coverage.html"><strong aria-hidden="true">1.4.</strong> Code Coverage</a></li></ol></li><li><a href="release.html"><strong aria-hidden="true">2.</strong> Managing Releases</a></li><li><ol class="section"><li><a href="release/changelog.html"><strong aria-hidden="true">2.1.</strong> CHANGELOG</a></li><li><a href="release/publish.html"><strong aria-hidden="true">2.2.</strong> Publishing Crates</a></li><li><a href="release/binaries.html"><strong aria-hidden="true">2.3.</strong> Prebuilt Binaries</a></li><li><a href="release/docs.html"><strong aria-hidden="true">2.4.</strong> API Documentation</a></li></ol></li><li><a href="dependencies.html"><strong aria-hidden="true">3.</strong> Wrangling Dependencies</a></li><li><ol class="section"><li><a href="dependencies/updates.html"><strong aria-hidden="true">3.1.</strong> Keeping Up on Dependencies</a></li></ol></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="submenu">
                                <li><button class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li><button class="theme" id="rust">Rust</button></li>
                                <li><button class="theme" id="coal">Coal</button></li>
                                <li><button class="theme" id="navy">Navy</button></li>
                                <li><button class="theme" id="ayu">Ayu</button></li>
                            </ul>
                        </div>

                        <h1 class="menu-title">Crate CI</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="print.html#crate-ci" id="crate-ci"><h1>crate-ci</h1></a>
<p>In Rust, there is a tendency towards a lot of small crates.  The challenge with
that is the overhead of maintaining a crate, from managing issues to releases.</p>
<p>The goal of this guide is to help you successfully manage your <a href="https://www.rust-lang.org/">Rust</a>
crates with minimal overhead.</p>
<ul>
<li>
<p><a href="pr.html">Managing PRs</a></p>
</li>
<li>
<p><a href="release.html">Managing Releases</a></p>
</li>
<li>
<p><a href="dependencies.html">Wrangling Dependencies</a></p>
</li>
</ul>
<p>If you need further help, feel free to reach out to us on <a href="https://gitter.im/crate-ci/general">gitter</a></p>
<a class="header" href="print.html#contributing" id="contributing"><h2>Contributing</h2></a>
<ul>
<li>Find a mistake or out of date examples? Feel free to file an <a href="https://github.com/crate-ci/crate-ci.github.io/issues">issue</a> or create a <a href="https://github.com/crate-ci/crate-ci.github.io">PR</a>.</li>
<li>Have a way to improve the CI for crates? Feel free to join the <a href="https://github.com/crate-ci/meta/issues">discussion</a></li>
</ul>
<a class="header" href="print.html#managing-prs" id="managing-prs"><h1>Managing PRs</h1></a>
<p>The goal of this section is to help you streamline the process for reviewing and accepting PRs.</p>
<a class="header" href="print.html#testing" id="testing"><h1>Testing</h1></a>
<p>Pre-requisites:</p>
<ul>
<li>Crate exists</li>
<li><code>cargo test</code> runs relevant tests</li>
</ul>
<a class="header" href="print.html#questions-to-consider" id="questions-to-consider"><h2>Questions to Consider</h2></a>
<a class="header" href="print.html#platforms-to-support" id="platforms-to-support"><h3>Platforms to Support?</h3></a>
<p>Target platforms are a combination of:</p>
<ul>
<li>OS</li>
<li>CPU</li>
<li>32-bit or 64-bit</li>
<li>(Linux) libc version</li>
<li>(Windows) MSys or MSVC</li>
</ul>
<p>These platforms fall into several major categories</p>
<ul>
<li>Desktop</li>
<li>&quot;Embedded&quot;: Phones, Raspberry Pis, etc</li>
<li>Embedded: Those running <code>no_std</code></li>
</ul>
<p>If you are creating a library, the ideal situation is to support as many of these as possible.</p>
<p>If you are creating a program, it is mostly a matter of having at least one
form of binary on the systems you care about.  It would be nice to support more
in case a contributor's development environment is different than yours.</p>
<a class="header" href="print.html#rust-versions-to-support" id="rust-versions-to-support"><h3>Rust versions to Support?</h3></a>
<p>Some clients might not be able to always use the latest release.  Maintainers have taken different approaches to this</p>
<ul>
<li>Don't support older versions</li>
<li>Support <code>N</code> releases back</li>
<li>Only require compiler upgrades on major or minor</li>
</ul>
<p>In addition to numbered, releases, Rust has the following release labels</p>
<ul>
<li><code>stable</code>: The current release</li>
<li><code>beta</code>: The next release</li>
<li><code>nightly</code>: Bleeding edge with feature flags to enable &quot;unstable&quot; features
<ul>
<li>&quot;unstable&quot; from the perspective of API/behavior compatibility; this does not speak to whether it is runtime stable</li>
</ul>
</li>
</ul>
<p>Recommendation:</p>
<ul>
<li>Support 2 releases back</li>
<li>Features requiring <code>nightly</code> are hidden behind a feature flag</li>
</ul>
<a class="header" href="print.html#platform--rust-coverage" id="platform--rust-coverage"><h3>Platform / Rust Coverage?</h3></a>
<p>You can run your tests on every version of Rust and across every platform at
the cost of slower feedback on your PRs and increasing load on your chosen CI
service.</p>
<p>Recommendation:</p>
<ul>
<li>Test all platforms on &quot;2 releases back&quot; and <code>stable</code></li>
<li>Test the minimum platforms on <code>beta</code> and <code>nightly</code></li>
</ul>
<a class="header" href="print.html#ci-triggers" id="ci-triggers"><h3>CI Triggers</h3></a>
<p>Travis and related CIs by default trigger builds on</p>
<ul>
<li>Commits to branches in the repo</li>
<li>PRs</li>
<li>Tags</li>
</ul>
<p>Additionally, you can schedule builds to happen periodically.  This can be
useful to catch problems from new versions of Rust or your dependencies (if you
don't commit your <a href="https://doc.rust-lang.org/cargo/guide/cargo-toml-vs-cargo-lock.html">lock file</a>). It can be discouraging to a
contributor if the build fails on their PR for reasons unrelated to their
change.</p>
<p>In contrast, we want to be respectful of the CI services we are getting for
free and don't want to put unnecessary load on them.</p>
<p>So as a healthy medium, we recommend:</p>
<ul>
<li>If you use nightly-only features: build frequently (~1 / week)</li>
<li>All else: build monthly (<code>0 0 1 * *</code> in cron syntax)</li>
</ul>
<p>Notes:</p>
<ul>
<li>If the service offers it (like Travis), you probably want it set to &quot;Do not
run if there has been a build in the last 24 hours&quot; rather than &quot;Always run&quot;.</li>
<li>Appveyor has put <a href="https://www.appveyor.com/blog/2017/11/08/sheduled-builds-for-free-accounts/">extra restrictions on scheuled builds</a>.</li>
</ul>
<a class="header" href="print.html#running-tests-on-prs" id="running-tests-on-prs"><h2>Running Tests on PRs</h2></a>
<p>There are several CI hosts that will help you run tests on your CI</p>
<p>See also <a href="https://github.com/crate-ci/example-base">example-base</a>.</p>
<a class="header" href="print.html#travisci" id="travisci"><h3>TravisCI</h3></a>
<p>Supports:</p>
<ul>
<li>Linux</li>
<li>Mac</li>
<li><a href="https://blog.travis-ci.com/2018-10-11-windows-early-release">Windows</a></li>
</ul>
<p>Steps:</p>
<ol>
<li><a href="https://travis-ci.org/">Sign up for TravisCI</a></li>
<li>View your repositories by clicking on your name</li>
<li>Follow the steps for &quot;Review and add&quot; your organization, if needed</li>
<li>&quot;Sync account&quot; if your repo isn't showing up</li>
<li>Toggle the switch for your repo</li>
<li>Add a <code>.travis.yml</code> to your repo</li>
</ol>
<p>This is a good starting <code>.travis.yml</code>:</p>
<pre><code class="language-yml">sudo: false
language: rust
rust:
- 1.22.0  # Oldest supported
- stable
- beta
- nightly

os:
- linux
- osx
- windows

install:
- if [[ &quot;$TRAVIS_OS_NAME&quot; == &quot;windows&quot; ]]; then choco install windows-sdk-10.0; fi # windows workaround (for now)

script:
- cargo check --verbose
- cargo test --verbose

cache:
  cargo: true
</code></pre>
<p>Highlights</p>
<ul>
<li><code>sudo: false</code>: Allows Travis to do some optimizations</li>
<li><code>os</code>: Applies all tests to listed operating systems</li>
<li><code>install</code>: Windows workaround to allow rust to run properly.  Remove if you
are not testing on Windows.  Hopefully temporary as Travis CI <em>just</em> started
Windows support as of 2018-10-11.</li>
<li><code>cargo check</code>: Only needed if your project has a <code>[[bin]]</code>.  Ensure that that
builds type. <code>check</code> delivers faster turnaround than doing <code>cargo build</code>
since we don't care about the build artifact.</li>
<li><code>cargo test</code>: If your crate has <a href="https://doc.rust-lang.org/cargo/reference/manifest.html#the-features-section">features</a>, considering at
least re-running the tests with <code>--no-default-features</code> and <code>--all-features</code>,
as appropriate.</li>
<li><code>cache:</code>: <a href="https://docs.travis-ci.com/user/caching/#Rust-Cargo-cache">Cache the cargo registry and build</a></li>
</ul>
<a class="header" href="print.html#appveyor" id="appveyor"><h3>Appveyor</h3></a>
<p>Supports:</p>
<ul>
<li>Windows</li>
</ul>
<p>This is a good starting <code>appveyor.yml</code>:</p>
<pre><code class="language-yml">environment:
  global:
    CHANNEL: stable
    #APPVEYOR_CACHE_SKIP_RESTORE: true  # Uncomment when caching causes problems

  matrix:
  # Oldest supported
  - TARGET: x86_64-pc-windows-msvc
    CHANNEL: 1.22.0
  - TARGET: x86_64-pc-windows-gnu
    CHANNEL: 1.22.0
  # Stable channel
  - TARGET: i686-pc-windows-msvc
    CHANNEL: stable
  - TARGET: i686-pc-windows-gnu
    CHANNEL: stable
  - TARGET: x86_64-pc-windows-msvc
    CHANNEL: stable
  - TARGET: x86_64-pc-windows-gnu
    CHANNEL: stable
  # Beta channel
  - TARGET: x86_64-pc-windows-msvc
    CHANNEL: beta
  - TARGET: x86_64-pc-windows-gnu
    CHANNEL: beta
  # Nightly channel
  - TARGET: x86_64-pc-windows-msvc
    CHANNEL: nightly
  - TARGET: x86_64-pc-windows-gnu
    CHANNEL: nightly

install:
- ps: &gt;-
    $Env:PATH += ';C:\msys64\usr\bin'
- curl -sSf -o rustup-init.exe https://win.rustup.rs/
- rustup-init.exe -y --default-host %TARGET% --default-toolchain %CHANNEL%
- set PATH=%PATH%;C:\Users\appveyor\.cargo\bin
- rustc -Vv
- cargo -V

test_script:
- cargo check --verbose
- cargo test --verbose

cache:
- C:\Users\appveyor\.cargo\registry
- target

notifications:
- provider: Email
  on_build_success: false

# Building is done in the test phase, so we disable Appveyor's build phase.
build: false
</code></pre>
<p>Highlights:</p>
<ul>
<li><code>install</code>
<ul>
<li>Install rust using Curl (distributed with msys64)</li>
<li>Print tool versions for traceability</li>
</ul>
</li>
</ul>
<a class="header" href="print.html#style-enforcement" id="style-enforcement"><h1>Style Enforcement</h1></a>
<p>Pre-requisites:</p>
<ul>
<li><a href="pr/testing.html">Testing</a> is setup</li>
</ul>
<p><a href="https://github.com/rust-lang-nursery/rustfmt">rustfmt</a> is the standard tool for automating code formatting.  You
can run it manually to clean up your code, integrate it into your text editor
to do it automatically, or have it verify if your code is formatted correctly.
That last role is what we want to leverage to reduce reduce the burden of
handling PRs.</p>
<p>See also <a href="https://github.com/crate-ci/example-rustfmt">example-rustfmt</a>.</p>
<a class="header" href="print.html#specifying-your-style" id="specifying-your-style"><h2>Specifying Your Style</h2></a>
<p>We recommend you use the default style as that will be most universal within the Rust ecosystem.</p>
<p>With that said, it would be beneficial to capture a snapshot of that style.</p>
<ul>
<li>If users are on different versions of <code>rustfmt</code> with different defaults, it will help minimize conflicts.</li>
<li>If a new <code>rustfmt</code> is released with a new default, this could cause PRs to start failing, frustrating contributors.</li>
</ul>
<p>You can lock down your style by running:</p>
<pre><code class="language-bash">rustfmt --dump-default-config .rustfmt.toml
</code></pre>
<a class="header" href="print.html#travisci-1" id="travisci-1"><h2>TravisCI</h2></a>
<p>Unlike your tests, there is little value in running more than one job to check
the style. We recommend running it on Travis rather than Appveyor because
Travis supports your jobs running in parallel.</p>
<p>We'll be adding the following to your <code>.travis.yml</code>:</p>
<pre><code class="language-yml">matrix:
  include:
  - env: RUSTFMT
    rust: 1.24.0  # `stable`: Locking down for consistent behavior
    install:
    - rustup component add rustfmt-preview
    script:
    - cargo fmt -- --write-mode=diff
</code></pre>
<p>Highlights:</p>
<ul>
<li><code>matrix: include:</code> is allowing us to define a complete one-off build job.
<ul>
<li>This will run in parallel to your tests, giving you quicker feedback.</li>
<li>No other job output will be in here, making it easier to see the results.</li>
</ul>
</li>
<li><code>rust: 1.24.0</code>: We run a specific version of Rust to get its version of <code>rustfmt</code>
<ul>
<li>Locking down to a specific version is helpful to avoid behavior changes, even if bug fixes, from breaking PRs.</li>
</ul>
</li>
<li><code>env: RUSTFMT</code>: This is purely here because Travis will put it in the job summary, making it easier to distinguish this job from others</li>
</ul>
<a class="header" href="print.html#code-smells" id="code-smells"><h1>Code Smells</h1></a>
<p>Pre-requisites:</p>
<ul>
<li><a href="pr/testing.html">Testing</a> is setup</li>
</ul>
<a class="header" href="print.html#warnings" id="warnings"><h2>Warnings</h2></a>
<p>Compiler warnings provide some basic checking for code smells.</p>
<p>There are many ways to check for warnings.  We recommend the followig:</p>
<p>In each of your <code>lib.rs</code>, <code>main.rs</code>, and test <code>.rs</code> files:</p>
<pre><code class="language-rust ignore">#![warn(warnings)]
</code></pre>
<p>In <code>.travis.yml</code>:</p>
<pre><code class="language-yml">matrix:
  include:
  - env: RUSTFLAGS=&quot;-D warnings&quot;
    rust: 1.24.0  # `stable`: Locking down for consistent behavior
    script:
    - cargo check --tests
</code></pre>
<p>Highlights</p>
<ul>
<li>Doesn't slow people down during prototyping by turning warnings into errors.</li>
<li>Contributors see all warnings they will be accountable for due to <code>warn(warnings)</code>.</li>
<li>Warning changes don't break the CI due to <code>rust: 1.24.0</code></li>
</ul>
<p>A major downside of this:</p>
<ul>
<li>Only run on one target</li>
</ul>
<p>See also <a href="https://github.com/crate-ci/example-warn">example-warn</a>.</p>
<a class="header" href="print.html#why-avoid-the-simple-answer" id="why-avoid-the-simple-answer"><h3>Why Avoid The Simple Answer</h3></a>
<p>The seemingly easy answer for checking for warnings is to either:</p>
<pre><code class="language-bash">RUSTFLAGS=&quot;-D warnings&quot; cargo build
</code></pre>
<p>or in each of your <code>lib.rs</code>, <code>main.rs</code>, and test <code>.rs</code> files:</p>
<pre><pre class="playpen"><code class="language-rust">
# #![allow(unused_variables)]
#![deny(warnings)]
#fn main() {
#}</code></pre></pre>
<p>The reason you don't want to do this in your CI process is that new versions of
Rust can add and remove warnings, causing the build to break on your
contributor's PR, frustrating and possibly alienating them.</p>
<a class="header" href="print.html#lints" id="lints"><h2>Lints</h2></a>
<p>Linters are extra tools for checking for code smells.  They aren't regular warnings either because</p>
<ul>
<li>Slower to analyze</li>
<li>False positives</li>
</ul>
<p><a href="https://github.com/rust-lang-nursery/rust-clippy">clippy</a> is the standard linter for the Rust ecosystem.</p>
<p>See also <a href="https://github.com/crate-ci/example-clippy">example-clippy</a>.</p>
<a class="header" href="print.html#travisci-2" id="travisci-2"><h3>TravisCI</h3></a>
<p>Like with <a href="pr/rustfmt.html">rustfmt</a>, you only need <code>clippy</code> running in one job
and we recommend running it on Travis rather than Appveyor because Travis
supports your jobs running in parallel.</p>
<p>We'll be adding the following to your <code>.travis.yml</code>:</p>
<pre><code class="language-yml">matrix:
  include:
  - env: CLIPPY
    rust: nightly-2018-07-17
    install:
      - rustup component add clippy-preview
    script:
      - cargo clippy --all-features -- -D clippy
</code></pre>
<p>Highlights</p>
<ul>
<li><code>matrix: include:</code> is allowing us to define a complete one-off build job.
<ul>
<li>This will run in parallel to your tests, giving you quicker feedback.</li>
<li>No other job output will be in here, making it easier to see the results.</li>
</ul>
</li>
<li>Clippy changes don't break the CI due to pinning the nightly version</li>
</ul>
<a class="header" href="print.html#coverage" id="coverage"><h1>Coverage</h1></a>
<a class="header" href="print.html#managing-releases" id="managing-releases"><h1>Managing Releases</h1></a>
<p>The goal of this section is to help you in <a href="https://en.wikipedia.org/wiki/Release_early,_release_often">releasinag early and releasing often</a>.</p>
<a class="header" href="print.html#changelog" id="changelog"><h1>CHANGELOG</h1></a>
<p>Providing a meaningful changelog is helpful for your users, particularly for
recording breaking changes and how people can migrate between versions.</p>
<a class="header" href="print.html#writing-a-changelog-with-clog" id="writing-a-changelog-with-clog"><h2>Writing a Changelog with <code>clog</code></h2></a>
<p><a href="https://github.com/clog-tool/clog-cli"><code>clog</code></a> can help you write your changelog.</p>
<p>Pre-requisites:</p>
<ul>
<li>Commits in <a href="https://github.com/conventional-changelog/conventional-changelog/blob/a5505865ff3dd710cf757f50530e73ef0ca641da/conventions/angular.md">conventional style</a>.
<ul>
<li><a href="https://gitcop.com/">gitcop</a> is a bot to enforce a specific commit style.</li>
</ul>
</li>
<li>Releases are tagged.</li>
<li>The previous release is the most recent tag.</li>
</ul>
<p>Steps</p>
<ol>
<li>Install clog: <code>cargo install clog-cli</code></li>
<li>Run <code>clog --setversion &lt;X&gt;.&lt;Y&gt;.&lt;Z&gt;</code></li>
<li>Massage the output as needed.</li>
</ol>
<a class="header" href="print.html#publishing-crates" id="publishing-crates"><h1>Publishing Crates</h1></a>
<a class="header" href="print.html#prebuilt-binaries" id="prebuilt-binaries"><h1>Prebuilt Binaries</h1></a>
<p>Pre-built binaries are a basic step you can take to help users of your application</p>
<ul>
<li>They are easy to create</li>
<li><code>cargo</code> (with <code>install</code>) is not meant as a binary distribution channel and has deficiencies
<ul>
<li><code>Cargo.lock</code> is not respected</li>
</ul>
</li>
<li>Users wanting to use your tool in their CI will see major slow downs and require workarounds.</li>
</ul>
<a class="header" href="print.html#uploading-binaries-to-github-releases" id="uploading-binaries-to-github-releases"><h2>Uploading Binaries to Github Releases</h2></a>
<p>Pre-requisites:</p>
<ul>
<li><a href="pr/testing.html">Testing</a> is setup.</li>
<li>Jobs exist for each supported target.</li>
</ul>
<a class="header" href="print.html#api-documentation" id="api-documentation"><h1>API Documentation</h1></a>
<a class="header" href="print.html#wrangling-dependencies" id="wrangling-dependencies"><h1>Wrangling Dependencies</h1></a>
<p>With Rust's focos many small crates, you can end up with a plethora of
dependenices.  This section is to help you keep them under control.</p>
<a class="header" href="print.html#keeping-up-on-dependencies" id="keeping-up-on-dependencies"><h1>Keeping Up on Dependencies</h1></a>
<p>Challenges with dependencies:</p>
<ul>
<li>Knowing when new versions are available.</li>
<li>Evaluating how new versions impact your users.</li>
<li>Validating your crate, including maintaining your oldest supported Rust version.</li>
</ul>
<p>Thankfully this is all automatable and has been, thanks to <a href="https://dependabot.com/">Dependabot</a>.</p>
<a class="header" href="print.html#dependabot" id="dependabot"><h2>Dependabot</h2></a>
<p>Recommended setup:</p>
<ol>
<li>Verify your CI configuration</li>
<li>Sign up</li>
<li>Add your repos</li>
<li>Lower update frequency to once a week (to balance updates with CI load)</li>
</ol>
<p>Your process will look like:</p>
<ol>
<li>Get a PR for a <code>Cargo.toml</code> or <code>Cargo.lock</code> update</li>
<li>Review the release notes, changelog, and/or commit history for impact</li>
<li>Wait until your CI gives the green light</li>
<li>Merge</li>
</ol>
<p>If an update introduces a conflict, Dependabot will automatically recreate the update.</p>
<a class="header" href="print.html#verify-your-ci-configuration" id="verify-your-ci-configuration"><h3>Verify your CI Configuration</h3></a>
<ul>
<li><a href="/pr/testing.html">Oldest-supported rustc</a> is used to catch dependencies that require newer rustc's</li>
<li>Don't run your CI on Dependabot branches to avoid double-running them</li>
</ul>
<a class="header" href="print.html#limiting-branches" id="limiting-branches"><h4>Limiting Branches</h4></a>
<p>A snippet for <code>.travis.yml</code>:</p>
<pre><code class="language-yml">branches:
  only:
  # Release tags
  - /^v\d+\.\d+\.\d+.*$/
  - master
</code></pre>
<p>A snippet for <code>appveyor.yml</code>:</p>
<pre><code class="language-yml">branches:
  only:
  # Release tags
  - /^v\d+\.\d+\.\d+.*$/
  - master
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if (getComputedStyle(document.querySelector(".fa")).fontFamily !== "FontAwesome") {
                var link = document.createElement('link');
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = '_FontAwesome/css/font-awesome.css';
                document.head.insertBefore(link, document.head.firstChild)
            }
        </script>

        

        

        
        <script src="ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        

        
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                window.print();
            })
        </script>
        

        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS script -->
        

    </body>
</html>
